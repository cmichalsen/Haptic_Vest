# Haptic Vest
Designed to work with games that support BHaptics using their available websocket interface on localhost port 15881. 
This project was inspired by https://github.com/bhaptics/tact-python and https://github.com/PointlesslyUseful/VRVest. Thank you! More information on BHaptics interface can be 
found at https://github.com/bhaptics/haptic-library. I am initially focusing on the front vest for 
development simplicity. Many of the parts chosen were what I had on hand. I expect these to change later on.

I decided to start this project because I did not see many DIY solutions online. I also thought this would be a great 
opportunity to meet and work with others. Please feel free to join in on this. 

## Parts
|    Part Description   | Quantity |                                                                                                                                                                                                                                                             Links                                                                                                                                                                                                                                                            |                                                                                                          Notes                                                                                                         |
|:---------------------:|:--------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
|    ESP8266 ESP-12E    |     1    | <a href="https://www.amazon.com/KeeYees-Internet-Development-Wireless-Compatible/dp/B07HF44GBT/ref=asc_df_B07HF44GBT/?tag=hyprod-20&linkCode=df0&hvadid=344022943810&hvpos=&hvnetw=g&hvrand=12981731925041252714&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=9032964&hvtargid=pla-742844552307&psc=1&tag=&ref=&adgrpid=69534739336&hvpone=&hvptwo=&hvadid=344022943810&hvpos=&hvnetw=g&hvrand=12981731925041252714&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=9032964&hvtargid=pla-742844552307">Amazon</a> | Microcontroller for haptic vest. Listens for inputs from Haptic game server and controls motors.                                                                                                                       |
| 2N2222 NPN Transistor |     9    |                                                                                                                                                                                                      <a href="https://www.amazon.com/gp/product/B07QSJND47/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&psc=1">Amazon</a>                                                                                                                                                                                                      | Used for switching motors on and off. These are necessary as the GPIO cannot handle current required for operating the motors.                                                                                         |
|    1k Ohm Resistor    |     7    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Used for channels D0 thru D2 and D5 thru D9 for connections to the transistors.                                                                                                                                        |
|    10k Ohm Resistor   |     2    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Used for channels D3 and D4 for connections to the transistors. For some reason these 2 channels had issues at startup with the 1k resistors. This is a temporary solution as it does reduce the power for the motors. |
| Portable USB Charger  |     1    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | I am using one with 10000mAh capacity that outputs 5V/2.1A.                                                                                                                                                            |
| PS4 Vibrative Motor   | 9        | <a href="https://a.aliexpress.com/_mPyqX6s">Ali Express</a>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                        |

## Progress
* Receiving haptic data from Zero Caliber and Phasmophobia
* *Game_Server.py* communicates with Haptic vest microcontroller
* Haptic vest microcontroller is able to vary power to each motor
* Shots in Zero Caliber seem to work relatively well

## Known Issues
* *Game_Server.py* sometimes reports several errors for missing end frames in data received from games
* Channels D3 and D4 PWM outputs are lower than other channels due to the higher resistors 
    * Consider using other GPIO channels or PWM drivers instead of transistors
* I don't believe I am using the provided timing attributes correctly for delays. Need to review BHaptic's SDK.
* The ESP8266 ESP-12E does not have enough GPIO to support 9 motors on front and back vests (18 total). 
    * Need to research other options such as ESP32.
* It is not obvious when the microcontroller is connected to WiFi and/or the game server. 
    * Plan to add a couple of status LEDs